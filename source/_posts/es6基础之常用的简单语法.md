---
title: es6åŸºç¡€ä¹‹å¸¸ç”¨çš„ç®€å•è¯­æ³•
date: 2018/11/08
updated: 2018/11/13
tags:
  - js
  - es6
  - å‰ç«¯
categories: js
abbrlink: 5ee4c1d
---

æœ¬æ–‡ä¸»è¦è®²è§£ ES6 ä¸­ **ç®€å•** **å¸¸ç”¨** çš„ä¸€äº›ç®€å•è¯­æ³•ï¼Œä¸åšè¿‡æ·±ä»‹ç»ï¼Œæ·±å…¥ä»‹ç»å¯å¼‚æ­¥é˜®ä¸€å³°å¤§ç¥çš„ [ECMAScript 6 å…¥é—¨](http://es6.ruanyifeng.com/#docs/intro)
## let å’Œ const

es6æ–°å¢äº†ä¸¤ä¸ªå£°æ˜å˜é‡çš„å‘½ä»¤åˆ†åˆ«ä¸º `let` å’Œ `const`

### let

letå£°æ˜å˜é‡ï¼Œåœ¨å£°æ˜çš„æ—¶å€™æ‰å®šä¹‰

ç‰¹ç‚¹ï¼šåªåœ¨å½“å‰ä»£ç å—ä¸­æœ‰æ•ˆï¼ˆæ³¨æ„æ˜¯â€œä»£ç å—â€ï¼Œè€Œä¸æ˜¯â€œä½œç”¨åŸŸâ€ï¼‰

#### ç”¨å¤„

ä¸ºä½•è¦ç”¨ `let` ï¼šå½“æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªå˜é‡åªåœ¨å½“å‰ä»£ç å—æœ‰æ•ˆï¼Œè€Œä¸å½±å“å½“å‰ä½œç”¨åŸŸçš„æ—¶å€™ä½¿ç”¨ï¼Œä¾‹å¦‚ä»¥ä¸‹ä¸¤ç§æƒ…å†µ
```javascript
for(let i = 0;i<100;i++){

}
// æˆ‘ä»¬å¸Œæœ› i ä»…ä»…åœ¨forå¾ªç¯é‡Œé¢ä½¿ç”¨
// è€Œä¸”ä»…ä»…åœ¨å½“å‰çš„for å¾ªç¯é‡Œé¢ä½¿ç”¨
```

```javascript
for(let key in obj){

}
// æˆ‘ä»¬å¸Œæœ› key ä»…ä»…åœ¨forå¾ªç¯é‡Œé¢ä½¿ç”¨
// è€Œä¸”ä»…ä»…åœ¨å½“å‰çš„for å¾ªç¯é‡Œé¢ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨ varï¼Œæœ€ç»ˆä¼šç•™ä¸‹ä¸€ä¸ªå˜é‡ key åœ¨å†…å­˜ä¸­
```

#### ç”¨æ³•è§£æ
```javascript
for (let i = 0; i < 10; i++) {
    // ...
}
console.log(i);
// i is not defined
```
i æ˜¯åœ¨ `for` å¾ªç¯é‡Œé¢å£°æ˜ä½¿ç”¨çš„ï¼Œæ•…æ— æ³•åœ¨å¤–é¢ä½¿ç”¨

```javascript
for (let i = 0; i < 3; i++) {
    let i = 'abc';
    console.log(i);
}
```
ä¸Šé¢ä»£ç æ­£ç¡®è¿è¡Œï¼Œè¾“å‡ºäº†3æ¬¡ `abc` ï¼Œè¿™è¡¨æ˜å¾ªç¯å†…éƒ¨ï¼ˆèŠ±æ‹¬å·å†…éƒ¨ï¼‰çš„å˜é‡ `i` ä¸å¾ªç¯å˜é‡ `i` ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæœ‰å„è‡ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚

#### æš‚æ—¶æ€§æ­»åŒº

```javascript
var a = 123;
if (true) {
    a = 'abc'; // ReferenceError
    let a;
}
// a is not defined
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒæŒ‰åŸæœ‰é€»è¾‘åˆ†æï¼Œ`a` å¼€å§‹ä¸º `123` ï¼Œåœ¨ `if` é‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šåˆ°ä¸Šä¸€çº§å»å¯»æ‰¾ `a` çš„å®šä¹‰å’Œèµ‹å€¼çš„åœ°æ–¹ ï¼Œäºæ˜¯èƒ½èµ‹å€¼æˆåŠŸæ‰å¯¹ã€‚
ä½†è¯¥èµ‹å€¼ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸º `let` å¯¼è‡´çš„

ES6 æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨ `let` æˆ– `const` å£°æ˜å˜é‡ï¼Œé‚£ä¹ˆåœ¨ä¸€å¼€å§‹å°±åœ¨å½“å‰ä»£ç å—å½¢æˆäº†ä¸€ä¸ªå—çº§å°é—­ä½œç”¨åŸŸï¼Œå‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œéƒ½ä¼šæŠ¥é”™

äºæ˜¯å°±äº§ç”Ÿäº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜

```javascript
typeof a12345
let a12345
typeof a123456
```
ä¼šå‘ç° `a12345` æ˜¯æŠ¥é”™ï¼Œè€Œä¸€ä¸ªæ²¡æœ‰å£°æ˜çš„å˜é‡ `a123456` å´æ˜¯ `undefined` 

### const

å…¶å®åœ¨ä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™ const å’Œ let åŒºåˆ«ä¸å¤§

#### constç‰¹ç‚¹

const æ—¨åœ¨å®šä¸€ä¸ªå›ºå®šä¸å˜çš„å˜é‡

æ³¨æ„ï¼šè¿™ä¸ªâ€œå›ºå®šä¸å˜â€æŒ‡çš„æ˜¯å†…å­˜åœ°å€

ä¸¾ä¾‹ï¼š

```javascript
const num = 10;
num = 20 // æŠ¥é”™

const obj = {age:12}
obj.age = 14 // no problem
```

## å­—ç¬¦ä¸²æ¨¡æ¿

è¿™ä¸ªçš„ç”¨å¤„çœŸçš„æ˜¯å¤ªå¤§äº†

æˆ‘æ›¾è§è¿‡è¿™æ ·çš„ä»£ç ï¼š

ä¸çŸ¥é“ä½ ä»¬çœ‹åˆ°è¿™æ ·çš„ä»£ç çš„æ—¶å€™ï¼Œå†…å¿ƒæ˜¯ä¸æ˜¯å¾ˆæ¿€åŠ¨å•ŠğŸ˜‚

åœ¨ ES6 é‡Œé¢ï¼Œå¦‚æœæœ‰äº›åœ°æ–¹ä¸å¾—ä¸ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ—¶å€™ï¼Œå¯ä»¥è¿™ä¹ˆä½¿ç”¨

```javascript
var a,b,c,d,e = 10;
var html = '';
for(let i = 0;i<20;i++){
    html+= `
    <div>
        <span>${a}</span>
        <span>${b}</span>
        <span>${c}</span>
        <span>${d}</span>
        <span>${e*i}</span>
    </div>
    `
}
$(".xxx").append(html)
```
åœ¨ES6ä¸­å¯ä»¥ç”¨ \`  \` æ¥åŒ…è£¹å­—ç¬¦ä¸²ï¼Œ
1. åœ¨å…¶ä¸­å¯ä»¥è‚†æ— å¿Œæƒ®çš„ä½¿ç”¨å•å¼•å·å’ŒåŒå¼•å·ã€‚
2. å˜é‡æˆ–è€…è¡¨è¾¾å¼ ç”¨ `${}` åŒ…è£¹èµ·æ¥

## ç®­å¤´å‡½æ•°

ES6 é‡Œé¢æä¾›äº†å‡½æ•°çš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯ç®­å¤´å‡½æ•°

```javascript
var ad = ()=>{
    console.log(123)
}
```

### ç”¨å¤„

```javascript
var sum = 0;
[1,2,3].map((item)=>{sum+=item})
// sum 6

// ä¹Ÿå¯ä»¥ç®€å†™ä¸º
[1,2,3].map( item =>{sum+=item})
```

å¦‚æœéœ€è¦ `return` ï¼Œå¯ä»¥ç›´æ¥çœç•¥åé¢çš„èŠ±æ‹¬å·

```javascript
var arr = [1,2,3].map( item => item * 2 )
// [2,4,6]
```

### ä¾‹å­

è¿™é‡Œæœ‰ä¸ªæœ‰æ„æ€çš„å°ä¾‹å­

æ³¨æ„çš„æ˜¯ï¼Œç®­å¤´å‡½æ•°é‡Œé¢ `this` çš„ä½œç”¨åŸŸï¼Œæ˜¯åœ¨å®šä¹‰çš„æ—¶å€™ç”Ÿæ•ˆçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™ç”Ÿæ•ˆï¼Œå…·ä½“çœ‹é˜®ä¸€å³°å¤§ç¥çš„[æ³¨æ„ç‚¹](http://es6.ruanyifeng.com/#docs/function#%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9)

```javascript
var obj2 = {
    location:'åšæ–‡',
    add:function(){
        console.log(this.location)
    }
}
// obj2.add() == 'åšæ–‡'
var obj2 = {
    location:'åšæ–‡',
    add:()=>{
        console.log(this.location)
    }
}
// obj2.add() != 'åšæ–‡'
```
ä¸Šé¢ä»£ç é‡Œé¢ `obj2` é‡Œé¢çš„ `this` å‘ç°æŒ‡å‘çš„æ˜¯ `window` å¯¹è±¡


## æ•°ç»„å’Œå¯¹è±¡

æ•°ç»„å’Œå¯¹è±¡é‡Œé¢ï¼Œç”¨åˆ°çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯è¿­ä»£å§

ä»¥å‰æˆ‘ä»¬å¤åˆ¶ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡çš„æ–¹æ³•æ˜¯ä»¥ä¸‹è¿™æ ·

```javascript
var arr1 = [1,2,3].concat([])
var arr2 = [1,2,3].splice()
var arr3 = Object.assign([],[1,2,3])
var obj1 = Object.assign({},{age:1})
```

æ–¹æ³•å¾ˆå¤šå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†

åœ¨ES6ä¸­å°±æ–¹ä¾¿å¤šäº†

```javascript
var arr = [1,2,3]
var arr1 = [...arr]

var obj0 = {age:123}
var obj1 = {name:'xxx'}
var obj2 = {...obj0,...obj1}
```
ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å¤åˆ¶çš„éƒ½æ˜¯æµ…æ‹·è´

### æ•°ç»„å¸¸ç”¨æ–¹æ³•

ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼Œå¹³æ—¶ç”¨çš„æ¯”è¾ƒå¤šçš„æ–¹æ³•

#### map
.map ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„
```javascript
var arr = [1,2,3,4]
var sum = arr.map( item => item*2)
```
#### reduce
.reduce ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè®¡ç®—åçš„å€¼ï¼Œä¹Ÿæ˜¯æœ€åè¿”å›çš„å€¼ï¼Œåé¢æ‰æ˜¯ `item` , `index`
```javascript
var arr = [1,2,3,4]
var arrSum = arr.reduce( (sum,item) => sum+item)
// arrSum == 10
```
#### filter
.map ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„
```javascript
var arr = [1,2,3,4]
var arr = arr.reduce( item => item >= 3)
// [3,4]
```
ä»–è·Ÿ `.map` æ–¹æ³•å¾ˆåƒï¼Œä¸€èˆ¬è¦å¯¹æ•°æ®è¿›è¡Œå¤„ç†å°±ç”¨ `.map` æ–¹æ³•ï¼Œè€Œä»…ä»…æ˜¯è¿‡æ»¤æ•°æ®å°±ç”¨ `.filter`
#### includes
`.includes` åˆ¤æ–­æ•°ç»„æ˜¯å¦å­˜åœ¨æŸå€¼
```javascript
var arr = ['a','s','d','f']
arr.includes('s') // true
arr.includes('s',3) // true
```
`includes` ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŸ¥è¯¢çš„èµ·å§‹ä½ç½®