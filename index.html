<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="åšå®¢">
<meta property="og:url" content="https://iprogramme.github.io/MyBlog/index.html">
<meta property="og:site_name" content="åšå®¢">
<meta property="og:locale">
<meta property="article:author" content="éƒ­å‡">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">åšå®¢</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://iprogramme.github.io/MyBlog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-jsæ•°ç»„å¯¹è±¡å»é‡" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/20/js%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D/" class="article-date">
  <time datetime="2018-11-19T16:00:00.000Z" itemprop="datePublished">2018-11-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/20/js%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D/">js æ•°ç»„å¯¹è±¡å»é‡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>åœ¨jsä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼šç»™ä¸€ä¸ªæ•°ç»„å¯¹è±¡å»é‡</p>
<p>å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">123</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">124</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">125</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">126</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">127</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">128</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">129</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">121</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">122</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">123</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">124</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">125</span>,<span class="attr">name</span>:<span class="string">&#x27;xxx1&#x27;</span>,<span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">// ä»»åŠ¡æ˜¯å°†ä¸¤ä¸ªæ‰€æœ‰å±æ€§å€¼ç›¸åŒçš„å¯¹è±¡ï¼Œåªä¿ç•™ä¸€ä¸ª</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæ•°ç»„é‡Œé¢æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ <code>es6</code> çš„ <code>Set()</code> å°±å¯ä»¥å®Œæˆå»é‡ï¼Œé‚£ä¹ˆå¯¹äºæ•°ç»„ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹è±¡çš„ï¼Œå¦‚ä½•å»é‡æ‰æ˜¯æœ€å¥½çš„æ–¹å¼å‘¢</p>
<p>æŒ‰ç…§æ­£å¸¸æ€ç»´ï¼Œå°±æ˜¯å°†æ•°ç»„æ¯ä¸€é¡¹å’Œåé¢çš„æ¯ä¸€é¡¹çš„æ¯ä¸€ä¸ªå±æ€§å€¼åšå¯¹æ¯”ï¼Œå¦‚æœå…¨éƒ¨ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¿ç•™ä¸€ä¸ªï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å†™å‡ºç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = [arr[<span class="number">0</span>]]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>;j &lt; add.<span class="property">length</span>; j++)&#123;</span><br><span class="line">        <span class="keyword">var</span> arrIstr = []</span><br><span class="line">        <span class="keyword">var</span> addIstr = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> arr[i])&#123;</span><br><span class="line">            arrIstr.<span class="title function_">push</span>(arr[i][key])</span><br><span class="line">            addIstr.<span class="title function_">push</span>(add[j][key])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(arrIstr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>) == addIstr.<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>))&#123;</span><br><span class="line">            flag = <span class="literal">false</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">        add.<span class="title function_">push</span>(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¹ˆä¸€å¤§å †ï¼Œå±‚å±‚çš„å¾ªç¯ï¼Œæ— æ•°çš„åˆ¤æ–­ï¼Œåˆ†åˆ†é’Ÿæƒ³ç‚¸å•Šæœ‰æœ¨æœ‰ï¼Œè€Œä¸”è°èƒ½æ˜ç™½ï¼Œä½ è¿™ä¹ˆä¸€å¤§å †çš„ä»£ç ï¼Œç›®çš„ä»…ä»…æ˜¯ä¸ºäº†ç»™ä¸€ä¸ªæ•°ç»„å¯¹è±¡å»é‡ğŸ˜‚</p>
<p>é‚£ä¹ˆæœ‰ä»€ä¹ˆå…¶ä»–çš„å¥½ä¸€ç‚¹çš„åŠæ³•å»é‡å—ï¼Ÿæœ‰äººä¼šè¯´äº† ï¼Œ <code>es6</code> å•Šï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹ä¸€èˆ¬çš„ <code>es6</code> å†™æ³•å¦‚ä½•</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/20/js%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D/" data-id="clpj81tim0009ad9v6ra49w27" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æ‰‹å†™promiseåˆ†æ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/20/%E6%89%8B%E5%86%99promise%E5%88%86%E6%9E%90/" class="article-date">
  <time datetime="2018-11-19T16:00:00.000Z" itemprop="datePublished">2018-11-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/20/%E6%89%8B%E5%86%99promise%E5%88%86%E6%9E%90/">æ‰‹æŠŠæ‰‹æ•™ä½ å†™promiseï¼Œå¸®ä½ åˆ†æpromiseçš„æ‰§è¡Œè¿‡ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">promise</span>(<span class="params">fn</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">var</span> state = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> callbacks = []</span><br><span class="line">    <span class="keyword">var</span> value;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">newValue</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue);</span><br><span class="line">        state = <span class="string">&#x27;fulfilled&#x27;</span>;</span><br><span class="line">        value = newValue</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------&#x27;</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; </span><br><span class="line">            callbacks.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">                <span class="title function_">handle</span>(callback);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">handle</span>(<span class="params">obj = &#123;&#125;</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(state);</span><br><span class="line">        <span class="keyword">if</span>(state == <span class="string">&#x27;pending&#x27;</span>)&#123;</span><br><span class="line">            callbacks.<span class="title function_">push</span>(obj)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!obj.<span class="property">onFulfilled</span>) &#123;</span><br><span class="line">            obj.<span class="title function_">resolve</span>(value);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> ret = obj.<span class="title function_">onFulfilled</span>(value);  </span><br><span class="line">        obj.<span class="title function_">resolve</span>(ret) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">then</span> = <span class="function">(<span class="params">onFulfilled</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>); </span><br><span class="line">            <span class="title function_">handle</span>(&#123;</span><br><span class="line">                <span class="attr">onFulfilled</span>:onFulfilled,</span><br><span class="line">                <span class="attr">resolve</span>:resolve</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">fn</span>(resolve)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title function_">promise</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">res</span>(<span class="number">111</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">promise</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">6</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">res</span>(<span class="number">222</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">333</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆ†æä»£ç çš„è¿è¡Œé¡ºåº</p>
<p>å…ˆå‡è®¾æ‰€æœ‰çš„ä»£ç é‡Œé¢æ²¡æœ‰è®¾ç«‹å®šæ—¶å™¨</p>
<p>ä¸»çº¿ç¨‹æ‰“å°é¡ºåºä¸º <code>1ï¼Œ4ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ2ï¼Œ3ï¼Œ4</code></p>
<ol>
<li>new promise()   â€“ æ‰“å° 1ï¼Œæ‰“å° 4</li>
<li>.then()  â€“ æ‰“å° 2</li>
<li>.then é‡Œé¢çš„ new promise() â€“ æ‰“å° 3ï¼Œæ‰“å° 4</li>
<li>ç¬¬äºŒä¸ª .then â€“ æ‰“å° 2</li>
<li>ç¬¬äºŒä¸ª .then é‡Œé¢çš„ new promise() â€“ æ‰“å° 3ï¼Œæ‰“å° 4</li>
</ol>
<p>ä¸»æµç¨‹èµ°å®Œ</p>
<p>ä¸»æµç¨‹è§£é‡Šï¼š</p>
<ol>
<li>new promise() ä¸º new äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸Šé¢éƒ½æ˜¯å˜é‡æ–¹æ³•çš„åˆå§‹åŒ–ï¼ŒçœŸæ­£çš„ä»£ç åªæœ‰ä¸¤è¡Œå°±æ˜¯ <code>fn(resolve);console.log(4);</code> æ‰€ä»¥å…ˆå‡º 1ï¼Œåå‡º 4</li>
<li>.then()  æ‰“å° 2ï¼Œç„¶åè¿”å›ä¸€ä¸ª new promise()</li>
<li>ä¸Šä¸€æ­¥è¿”å›çš„ new promise() è¿è¡Œï¼Œæ‰“å°3ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æ‰§è¡Œäº† handle çš„è¿‡ç¨‹ï¼‰ï¼Œç„¶åæ‰“å° 4</li>
<li>ç”±äºä¸Šä¸€æ­¥è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨å¤–é¢å¯ä»¥ç›´æ¥å†æ¬¡ .then è€Œä¸ä¼šæŠ¥é”™ï¼Œé‚£ä¹ˆè¿™ä¸€æ¬¡çš„ .then() ä¹Ÿå°±æ˜¯ä¸Šä¸€ä¸ª promise çš„then è€Œä¸æ˜¯ç¬¬ä¸€æ­¥é‡Œé¢çš„ new promise()</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/20/%E6%89%8B%E5%86%99promise%E5%88%86%E6%9E%90/" data-id="clpj81tiu000jad9v7q5k9e77" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/promise/" rel="tag">promise</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æ€§èƒ½ä¼˜åŒ–ä¸€ ä¹‹ æ‰“åŒ…" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/19/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80%20%E4%B9%8B%20%E6%89%93%E5%8C%85/" class="article-date">
  <time datetime="2018-11-19T02:45:37.000Z" itemprop="datePublished">2018-11-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰ç«¯é¡µé¢æ€§èƒ½ä¼˜åŒ–ä¸€-ä¹‹-æ‰“åŒ…"><a href="#å‰ç«¯é¡µé¢æ€§èƒ½ä¼˜åŒ–ä¸€-ä¹‹-æ‰“åŒ…" class="headerlink" title="å‰ç«¯é¡µé¢æ€§èƒ½ä¼˜åŒ–ä¸€ ä¹‹ æ‰“åŒ…"></a>å‰ç«¯é¡µé¢æ€§èƒ½ä¼˜åŒ–ä¸€ ä¹‹ æ‰“åŒ…</h2><p>è¯´æ˜ï¼šæˆ‘è¿™é‡Œç”¨çš„æ˜¯vueé¡¹ç›®ï¼Œvue-cli 3.0 ï¼Œæœ¬æ–‡ä»¥æ­¤ä¸ºä¾‹</p>
<p>è§£å†³é—®é¢˜çš„æ–¹å¼ï¼Œéƒ½ç›´æ¥åœ¨â€œæ–¹æ³•â€é‡Œé¢å†™äº†ï¼Œæœ‰ä¸æ‡‚çš„ï¼Œæ¬¢è¿å¤§å®¶äº¤æµğŸ˜‚</p>
<h3 id="å»sourceMap"><a href="#å»sourceMap" class="headerlink" title="å»sourceMap"></a>å»sourceMap</h3><p>æ–¹æ³•ï¼šæ‰¾åˆ° vue.config.js æ–‡ä»¶ï¼Œæ‰¾åˆ° <code>productionSourceMap</code> å°†å…¶æ”¹ä¸º <code>false</code> ï¼Œå®Œ</p>
<p>æ•ˆæœï¼š</p>
<p>æ€»ç»“ï¼šå¯ä»¥çœ‹åˆ°ï¼Œæ‰“åŒ…å‰ï¼Œ48ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å››ä¸ªæ˜¯ä»¥  <code>.map</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ•´ä¸ªåŒ…å¤§æ¦‚æœ‰ 6Mï¼Œåœ¨å°†å…¶æ”¹ä¸ºfalseä¹‹åæ‰“åŒ…ï¼Œåªæœ‰ 2.7M çš„å¤§å°äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¼€å¿ƒğŸ˜¯</p>
<h3 id="æ‰“åŒ…-gzip"><a href="#æ‰“åŒ…-gzip" class="headerlink" title="æ‰“åŒ… gzip"></a>æ‰“åŒ… gzip</h3><p>æ–¹æ³•ï¼š</p>
<ul>
<li>npm install compression-webpack-plugin â€“save-dev</li>
<li>æ‰¾åˆ° <code>vue.config.js</code> å¼•å…¥è¯¥åŒ…ï¼Œ<code>var  CompressionWebpackPlugin = require(&quot;compression-webpack-plugin&quot;)</code></li>
<li>åœ¨ <code>module.exports</code> é‡Œé¢é…ç½®è¯¥åŒ…</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">configureWebpack</span>: <span class="function">(<span class="params">config</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;production&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">plugins</span>:[</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">CompressionWebpackPlugin</span>(&#123;</span><br><span class="line">                        <span class="attr">test</span>:<span class="regexp">/\.js$|\.css$\.html$/</span>,</span><br><span class="line">                        <span class="attr">threshold</span>:<span class="number">10240</span>,</span><br><span class="line">                        <span class="attr">deleteOriginalAssets</span>:<span class="literal">false</span> <span class="comment">// ä¸åˆ é™¤åŸjsæ–‡ä»¶</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æœåŠ¡ç«¯ä¹Ÿè¦é…ç½®åŠ è½½æ‰è¡Œï¼Œè¿™é‡Œæˆ‘ç”¨çš„ <code>node.js</code> å’Œ <code>express</code> ï¼Œæ‰€ä»¥é…ç½®å¦‚ä¸‹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> compression = <span class="built_in">require</span>(<span class="string">&#x27;compression&#x27;</span>) <span class="comment">// å¼•å…¥æ­¤åŒ…æ¥åŠ è½½</span></span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>()</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">compression</span>());</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/blog&quot;</span>,express.<span class="title function_">static</span>(__dirname+<span class="string">&quot;/public&quot;</span>))</span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/&quot;</span>,express.<span class="title function_">static</span>(__dirname+<span class="string">&quot;/dist&quot;</span>))</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`loaclhost:3000`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ‰“åŒ…æ•ˆæœï¼š</p>
<p>é¡µé¢åŠ è½½é€Ÿåº¦æ•ˆæœï¼š</p>
<p>æ€»ç»“ï¼šè¿™ä¸ªéœ€è¦åç«¯é…åˆåŠ è½½æ‰è¡Œã€‚å‰ç«¯æ‰“åŒ…ä¹‹åï¼Œä¼šç”Ÿæˆ <code>.gz</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œç›´æ¥ä¸¢åˆ°æœåŠ¡ç«¯åŠ è½½å°±å¥½ã€‚ <code>deleteOriginalAssets</code> ä¹Ÿå¯ä»¥é€‰ä¸º <code>true</code> è¿™æ ·æ‰“å‡ºçš„åŒ…æ›´å°ï¼Œä½†ç”±äºç›´æ¥ç”¨çš„æ˜¯ <code>.gz</code> çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æºæ–‡ä»¶æ˜¯å¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå½±å“ä¸å¤§ï¼Œçœ‹ä¸ªäººå–œå¥½å§ğŸ˜‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/19/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80%20%E4%B9%8B%20%E6%89%93%E5%8C%85/" data-id="clpj81tis000had9v6klff1qs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node.jsçˆ¬è™«ä¸­å…³æ‘åœ¨çº¿ç”µç“¶è½¦ä¿¡æ¯" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/11/node.js%E7%88%AC%E8%99%AB%E4%B8%AD%E5%85%B3%E6%9D%91%E5%9C%A8%E7%BA%BF%E7%94%B5%E7%93%B6%E8%BD%A6%E4%BF%A1%E6%81%AF/" class="article-date">
  <time datetime="2018-11-10T16:00:00.000Z" itemprop="datePublished">2018-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/11/node.js%E7%88%AC%E8%99%AB%E4%B8%AD%E5%85%B3%E6%9D%91%E5%9C%A8%E7%BA%BF%E7%94%B5%E7%93%B6%E8%BD%A6%E4%BF%A1%E6%81%AF/">node.jsçˆ¬è™«ä¸­å…³æ‘åœ¨çº¿ç”µç“¶è½¦ä¿¡æ¯</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€è¿‘æ‰“ç®—ä¹°ä¸€è¾†ç”µç“¶è½¦æ¥ä¸Šä¸‹ç­ï¼Œä½†åˆä¸çŸ¥é“å“ªä¸ªå¥½ï¼Œç½‘ä¸Šæ˜¯å„è¯´çº·çº­å•Šï¼Œäºæ˜¯å°±æƒ³ç€ï¼Œå¹²è„†ç”¨node.jsè‡ªå·±å†™ä¸€ä¸ªå°çˆ¬è™«ï¼Œæ¥çˆ¬ä¸€ä¸‹ä¸­å…³æ‘åœ¨çº¿é‡Œé¢ç”µç“¶è½¦çš„ä¿¡æ¯å§ã€‚</p>
<p>ï¼ˆä»¥åå®Œæ•´ä»£ç è¯·å‰å¾€ <a href="http://www.yubowen2003.com/">www.yubowen2003.com</a> æš‚æ—¶è¿˜åœ¨å»ºè®¾ä¸­ï¼Œæ¬¢è¿å¤§å®¶æissueğŸ˜‚ ã€‚ï¼‰</p>
<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>è¯¥demoé‡‡ç”¨node.jsä½œä¸ºçˆ¬è™«ï¼Œä¸ºæ–¹ä¾¿ï¼Œæœ‰äº›åœ°æ–¹ä½¿ç”¨es6è¯­æ³•ï¼Œå¦‚æœ‰ä¸æ‡‚ï¼Œæ¬¢è¿å’¨è¯¢ğŸ˜Š</p>
<h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ul>
<li>ç¬¬ä¸€æ­¥ï¼Œå¼•å…¥éœ€è¦çš„åº“</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;node-fetch&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cheerio æ˜¯ä¸€ä¸ªç±»ä¼¼æµè§ˆå™¨ç«¯çš„jQueryï¼Œç”¨æ¥è§£æHTMLçš„</span></span><br><span class="line"><span class="comment">// fetch ç”¨æ¥å‘é€è¯·æ±‚</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¬¬äºŒæ­¥ï¼Œè®¾ç½®åˆå§‹çš„çˆ¬å–çš„å…¥å£(æˆ‘èº«å¤„æ­å·ï¼Œæ‰€ä»¥åœ°åŒºé€‰äº†æ­å·çš„ğŸ¤£)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹url</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;http://detail.zol.com.cn/convenienttravel/hangzhou/#list_merchant_loc&quot;</span></span><br><span class="line"><span class="comment">// ç”±äºæ¯ä¸ªaæ ‡ç­¾ä¸‹æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œæ•…éœ€è¦ä¸€ä¸ªæ ¹åœ°å€æ¥æ‹¼æ¥ï¼Œå¦‚ä¸‹</span></span><br><span class="line"><span class="keyword">var</span> urlRoot = <span class="string">&quot;http://detail.zol.com.cn&quot;</span> </span><br><span class="line"><span class="comment">// å­˜æ”¾æ‰€æœ‰urlï¼Œä¹‹æ‰€ä»¥ç”¨setï¼Œæ˜¯ä¸ºäº†é˜²æ­¢æœ‰ç›¸åŒçš„è€Œé‡å¤çˆ¬å»</span></span><br><span class="line"><span class="keyword">var</span> urls = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line"><span class="comment">// å­˜å‚¨æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> data = [] </span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„å‡†å¤‡éƒ¨åˆ†ç»“æŸäº†ğŸ˜…ï¼Œæ¥ä¸‹æ¥ï¼Œå¼€å§‹è¡¨æ¼”äº†</p>
<ul>
<li>åˆ†æç½‘é¡µï¼Œæ€è€ƒçˆ¬å–çš„æ–¹å¼</li>
</ul>
<p><img src="https://user-gold-cdn.xitu.io/2018/11/9/166f73fbf48b2e8c?w=2558&h=1466&f=png&s=1941192"></p>
<p>æ¯è¡Œ4æ¬¾ï¼Œæ¯é¡µæ˜¯48æ¬¾ï¼Œä¸€å…±16é¡µ</p>
<p>æ€è·¯ï¼š</p>
<ol>
<li>è·å–å½“å‰é¡µ48ä¸ªé“¾æ¥ã€‚</li>
<li>åˆ†åˆ«å¹¶ç‚¹è¿›å»ï¼Œæ‹¿åˆ°è¯¥ç”µç“¶è½¦ä¿¡æ¯ï¼ˆåç§°å’Œä»·æ ¼ï¼Œå…¶ä»–ä¿¡æ¯è·å–æ–¹å¼ä¸€æ ·ï¼Œè‡ªè¡Œæ”¹å°±å¥½ğŸ˜‚ï¼‰å¹¶å­˜å‚¨ã€‚</li>
<li>å›åˆ°å½“å‰é¡µï¼Œç‚¹å‡»â€œä¸‹ä¸€é¡µâ€</li>
<li>è·å–ä¸‹ä¸€é¡µçš„ä¿¡æ¯</li>
<li>é‡å¤æ­¥éª¤ 1 - 4</li>
</ol>
<p>å…·ä½“å®ç°æ–¹å¼ï¼Œä»¥ä¸‹æœ‰æ³¨é‡Š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯å¾—åˆ°æ¯ä¸ªé¡µé¢çš„48ä¸ªé“¾æ¥ï¼Œå¹¶å¼€å§‹å‘é€è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ad</span>(<span class="params">arg</span>)&#123;</span><br><span class="line">    <span class="comment">// å‚æ•° arg å…ˆä¸ç®¡</span></span><br><span class="line">    <span class="comment">// æœ¬åœ°åŒ–ä¸€ä¸‹éœ€è¦çˆ¬å–çš„é“¾æ¥</span></span><br><span class="line">    <span class="keyword">let</span> url2 = arg || url;</span><br><span class="line">    <span class="comment">// è¯·æ±‚ç¬¬ä¸€é¡µè¯¥ç½‘é¡µï¼Œæ‹¿åˆ°æ•°æ®ä¹‹åï¼Œå¤åˆ¶ç»™ app</span></span><br><span class="line">    <span class="keyword">var</span> app = <span class="keyword">await</span> <span class="title function_">fetch</span>(url2).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>())</span><br><span class="line">    <span class="comment">// ç„¶åå‡è£…ç”¨jQueryè§£æäº†</span></span><br><span class="line">    <span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(app)</span><br><span class="line">    <span class="comment">// è·å–å½“å‰é¡µæ‰€æœ‰ç”µç“¶è½¦çš„aæ ‡ç­¾</span></span><br><span class="line">    <span class="keyword">var</span> ele = $(<span class="string">&quot;#J_PicMode a.pic&quot;</span>)</span><br><span class="line">    <span class="comment">// å­˜æ”¾å·²ç»çˆ¬å–è¿‡çš„urlï¼Œé˜²æ­¢é‡å¤çˆ¬å–</span></span><br><span class="line">    <span class="keyword">var</span> old_urls = []</span><br><span class="line">    <span class="keyword">var</span> urlapp = []</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°æ‰€æœ‰aæ ‡ç­¾åœ°å€ä¹‹åï¼Œå­˜åœ¨æ•°ç»„é‡Œé¢ï¼Œç­‰ä¼šå„¿è¦å¼€å§‹çˆ¬çš„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ele.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        old_urls.<span class="title function_">push</span>(<span class="title function_">fetch</span>(urlRoot+$(ele[i]).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>()))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç”¨æŠŠURLä¸€å—ä¸¢ç»™promiseå¤„ç†</span></span><br><span class="line">    urlapp = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(old_urls)</span><br><span class="line">    <span class="comment">// å¤„ç†å®Œæˆä¹‹åï¼Œå¾ªç¯åŠ å…¥jQueryğŸ˜‚</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; urlapp.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> $2 = cheerio.<span class="title function_">load</span>(urlapp[i],&#123;<span class="attr">decodeEntities</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        data.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>:$2(<span class="string">&quot;.product-model__name&quot;</span>).<span class="title function_">text</span>(),</span><br><span class="line">            <span class="attr">price</span>:$2(<span class="string">&quot;.price-type&quot;</span>).<span class="title function_">text</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‡³æ­¤ï¼Œä¸€é¡µçš„æ•°æ®å°±çˆ¬å®Œäº†</span></span><br><span class="line">    <span class="comment">// console.log(data);</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç„¶åå¼€å§‹çˆ¬å–ä¸‹ä¸€é¡µ</span></span><br><span class="line">    <span class="keyword">var</span> nextURL = $(<span class="string">&quot;.next&quot;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å½“å‰é¡µæ˜¯ä¸æ˜¯æœ€åä¸€é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (nextURL)&#123;</span><br><span class="line">        <span class="keyword">let</span> next = <span class="keyword">await</span> <span class="title function_">fetch</span>(urlRoot+nextURL).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>())</span><br><span class="line">        <span class="comment">// è·å–ä¸‹ä¸€é¡µçš„æ ‡ç­¾ï¼Œæ‹¿åˆ°åœ°å€ï¼Œèµ°ä½ </span></span><br><span class="line">        <span class="title function_">ad</span>(urlRoot+nextURL)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">ad</span>()</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fetch = <span class="built_in">require</span>(<span class="string">&#x27;node-fetch&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&quot;http://detail.zol.com.cn/convenienttravel/hangzhou/#list_merchant_loc&quot;</span></span><br><span class="line"><span class="keyword">var</span> urlRoot = <span class="string">&quot;http://detail.zol.com.cn&quot;</span></span><br><span class="line"><span class="comment">// var url = &quot;http://localhost:3222/app1&quot;</span></span><br><span class="line"><span class="keyword">var</span> urls = <span class="keyword">new</span> <span class="title class_">Set</span>()</span><br><span class="line"><span class="keyword">var</span> data = [] </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">ad</span>(<span class="params">arg</span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> url2 = arg || url;</span><br><span class="line">    <span class="keyword">var</span> app = <span class="keyword">await</span> <span class="title function_">fetch</span>(url2).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>())</span><br><span class="line">    <span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(app)</span><br><span class="line">    <span class="keyword">var</span> ele = $(<span class="string">&quot;#J_PicMode a.pic&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> old_urls = []</span><br><span class="line">    <span class="keyword">var</span> urlapp = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ele.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        old_urls.<span class="title function_">push</span>(<span class="title function_">fetch</span>(urlRoot+$(ele[i]).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>()))</span><br><span class="line">    &#125;</span><br><span class="line">    urlapp = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(old_urls)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; urlapp.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> $2 = cheerio.<span class="title function_">load</span>(urlapp[i],&#123;<span class="attr">decodeEntities</span>: <span class="literal">false</span>&#125;)</span><br><span class="line">        data.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>:$2(<span class="string">&quot;.product-model__name&quot;</span>).<span class="title function_">text</span>(),</span><br><span class="line">            <span class="attr">price</span>:$2(<span class="string">&quot;.price-type&quot;</span>).<span class="title function_">text</span>()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> nextURL = $(<span class="string">&quot;.next&quot;</span>).<span class="title function_">attr</span>(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (nextURL)&#123;</span><br><span class="line">        <span class="keyword">let</span> next = <span class="keyword">await</span> <span class="title function_">fetch</span>(urlRoot+nextURL).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>res.<span class="title function_">text</span>())</span><br><span class="line">        <span class="title function_">ad</span>(urlRoot+nextURL)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">ad</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/11/node.js%E7%88%AC%E8%99%AB%E4%B8%AD%E5%85%B3%E6%9D%91%E5%9C%A8%E7%BA%BF%E7%94%B5%E7%93%B6%E8%BD%A6%E4%BF%A1%E6%81%AF/" data-id="clpj81tip000cad9v6nx4hok8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/node-js/" rel="tag">node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E7%88%AC%E8%99%AB/" rel="tag">çˆ¬è™«</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-es6åŸºç¡€ä¹‹promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/10/es6%E5%9F%BA%E7%A1%80%E4%B9%8Bpromise/" class="article-date">
  <time datetime="2018-11-09T16:00:00.000Z" itemprop="datePublished">2018-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/10/es6%E5%9F%BA%E7%A1%80%E4%B9%8Bpromise/">es6åŸºç¡€ä¹‹Promise</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ç½‘ä¸Šå¾ˆå¤šçš„æ•™ç¨‹ï¼Œéƒ½è®²çš„å¾ˆè¯¦ç»†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†</p>
<p>æˆ‘åªæ˜¯å¸Œæœ›ä½ èƒ½ç”¨æœ€å¿«çš„æ–¹å¼å­¦ä¼šä½¿ç”¨å®ƒ</p>
<h2 id="Promise-å«ä¹‰"><a href="#Promise-å«ä¹‰" class="headerlink" title="Promise å«ä¹‰"></a>Promise å«ä¹‰</h2><p>Promise æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†Promiseå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ç›´æ¥ç”¨çš„jså¯¹è±¡ï¼ˆå‰ç«¯å’Œnodeä¸­éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼‰</p>
<p>å‰ç«¯ç¦»ä¸å¼€å¼‚æ­¥ç¼–ç¨‹ï¼Œåœ¨ä»¥å‰ï¼Œæˆ‘ä»¬ç”¨ ajax è¿›è¡Œæ•°æ®äº¤äº’çš„æ—¶å€™ï¼Œç»å¸¸ç¢°åˆ°è¿™ç§æƒ…å†µ</p>
<ol>
<li>å…ˆè°ƒæ¥å£ç™»é™†.</li>
<li>æˆåŠŸä¹‹åè°ƒæ¥å£è·å–ç™»é™†ä¿¡æ¯</li>
<li>æˆåŠŸåè°ƒç”¨å·¦ä¾§å¯¼èˆª</li>
<li>æˆåŠŸåè°ƒç”¨æŸä¸ªé¡µé¢çš„åˆå§‹åŒ–æ•°æ®ï¼Œ</li>
<li>æˆåŠŸåï¼Œè°ƒç”¨æ¥å£æŸ¥è¯¢è¡¨æ ¼</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Promise"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Promise" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Promise"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Promise</h3><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„ä»£ç å°±åƒè¿™æ ·</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;/url1&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>:<span class="string">&#x27;/url2&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                    <span class="attr">url</span>:<span class="string">&#x27;/url3&#x27;</span>,</span><br><span class="line">                    <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                        <span class="comment">// ...</span></span><br><span class="line">                        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                            <span class="attr">url</span>:<span class="string">&#x27;/url4&#x27;</span>,</span><br><span class="line">                            <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                                <span class="comment">// ...</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä¸‘æ˜¯ä¸‘äº†ç‚¹ï¼Œä¹Ÿç¨å¾®æœ‰ç‚¹éš¾æ‡‚ï¼Œå…¸å‹çš„é‡‘å­—å¡”ä»£ç ï¼Œä½†ä»£ç æ²¡æ¯›ç—…ï¼Œèƒ½è·‘èµ·æ¥å°±okã€‚ä½†æ˜¯ï¼ï¼ï¼æœ€å¤§çš„é—®é¢˜åœ¨äºï¼Œæ˜å¤©äº§å“è„‘å­ä¸€çƒ­ï¼Œå‘Šè¯‰ä½ â€œé‚£å•¥ï¼Œä½ æŠŠç¬¬äºŒæ­¥å’Œç¬¬å››æ­¥çš„é¡ºåºè°ƒæ¢ä¸€ä¸‹â€ï¼Œç¬é—´æƒ³ç‚¸å•Šæœ‰æœ¨æœ‰ğŸ˜‚ï¼ï¼ï¼å³ä½¿æå‡ºæ¥ï¼Œä¹Ÿé€ƒä¸å‡ºå±‚å±‚å›è°ƒçš„å‘çˆ¹æŒå¿ƒğŸ˜‚</p>
<p>è‡ªä»æœ‰äº† Promise ä¹‹åï¼Œä»£ç å°±å˜å¾—å¥½çœ‹äº†å¾ˆå¤š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>:<span class="string">&#x27;/url1&#x27;</span>,</span><br><span class="line">        <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>:<span class="string">&#x27;/url2&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                <span class="title function_">resolve</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>:<span class="string">&#x27;/url3&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="comment">// ...</span></span><br><span class="line">                <span class="title function_">resolve</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸æ–­çš„ <code>new</code> å’Œ <code>then</code> ä¸‹å»ï¼Œè€Œå¦‚æœéœ€è¦æ›´æ”¹é¡ºåºï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒæ¢ä¸¤ä¸ª <code>then</code> çš„é¡ºåºå°±å¥½</p>
<p>æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ <code>Promise</code> ï¼Ÿå› ä¸ºå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</p>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p><code>Promise</code> çš„ä½¿ç”¨å…¶å®å¾ˆç®€å•ï¼Œå…¶å®è·Ÿå›è°ƒå‡½æ•°å·®ä¸å¤šï¼Œå¾ˆå®¹æ˜“æ‡‚</p>
<p><code>Promise</code> ä¸­å¸¦ä¸€ä¸ªå‚æ•° <code>resolve</code> ï¼Œå½“å¼‚æ­¥æ“ä½œç»“æŸä¹‹åï¼Œè°ƒç”¨è¯¥æ–¹æ³•å°±å¥½ï¼Œåœ¨å¤–é¢å°±å¯ä»¥ <code>then</code> äº†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>)</span><br><span class="line">        <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;,<span class="number">300</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">456</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 123</span></span><br><span class="line"><span class="comment">// 456</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š è™½ç„¶è¯´ <code>Promise</code> ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œä½†æœ€å¥½èƒ½è‡ªå·±æ‰‹åŠ¨å®ç°ä¸€ä¸ª <code>Promise</code> å‡½æ•°ï¼Œå¦å¤–ï¼Œ <code>Promise</code> çš„ç”¨å¤„å¾ˆå¤šï¼Œåé¢å°†é™†ç»­ä»‹ç»</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/10/es6%E5%9F%BA%E7%A1%80%E4%B9%8Bpromise/" data-id="clpj81ti10001ad9vd4brh5a9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Promise/" rel="tag">Promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6%EF%BC%8C%E5%89%8D%E7%AB%AF/" rel="tag">es6ï¼Œå‰ç«¯</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexoæ­å»ºåšå®¢" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/09/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2018-11-08T16:00:00.000Z" itemprop="datePublished">2018-11-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/09/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">hexoæ­å»ºä¸ªäººåšå®¢æ•™ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/09/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" data-id="clpj81tik0008ad9vftku3hz8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">åšå®¢</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-es6åŸºç¡€ä¹‹å¸¸ç”¨çš„ç®€å•è¯­æ³•" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/08/es6%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%80%E5%8D%95%E8%AF%AD%E6%B3%95/" class="article-date">
  <time datetime="2018-11-07T16:00:00.000Z" itemprop="datePublished">2018-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/08/es6%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%80%E5%8D%95%E8%AF%AD%E6%B3%95/">es6åŸºç¡€ä¹‹å¸¸ç”¨çš„ç®€å•è¯­æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ¬æ–‡ä¸»è¦è®²è§£ ES6 ä¸­ <strong>ç®€å•</strong> <strong>å¸¸ç”¨</strong> çš„ä¸€äº›ç®€å•è¯­æ³•ï¼Œä¸åšè¿‡æ·±ä»‹ç»ï¼Œæ·±å…¥ä»‹ç»å¯å¼‚æ­¥é˜®ä¸€å³°å¤§ç¥çš„ <a href="http://es6.ruanyifeng.com/#docs/intro">ECMAScript 6 å…¥é—¨</a></p>
<h2 id="let-å’Œ-const"><a href="#let-å’Œ-const" class="headerlink" title="let å’Œ const"></a>let å’Œ const</h2><p>es6æ–°å¢äº†ä¸¤ä¸ªå£°æ˜å˜é‡çš„å‘½ä»¤åˆ†åˆ«ä¸º <code>let</code> å’Œ <code>const</code></p>
<h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><p>letå£°æ˜å˜é‡ï¼Œåœ¨å£°æ˜çš„æ—¶å€™æ‰å®šä¹‰</p>
<p>ç‰¹ç‚¹ï¼šåªåœ¨å½“å‰ä»£ç å—ä¸­æœ‰æ•ˆï¼ˆæ³¨æ„æ˜¯â€œä»£ç å—â€ï¼Œè€Œä¸æ˜¯â€œä½œç”¨åŸŸâ€ï¼‰</p>
<h4 id="ç”¨å¤„"><a href="#ç”¨å¤„" class="headerlink" title="ç”¨å¤„"></a>ç”¨å¤„</h4><p>ä¸ºä½•è¦ç”¨ <code>let</code> ï¼šå½“æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªå˜é‡åªåœ¨å½“å‰ä»£ç å—æœ‰æ•ˆï¼Œè€Œä¸å½±å“å½“å‰ä½œç”¨åŸŸçš„æ—¶å€™ä½¿ç”¨ï¼Œä¾‹å¦‚ä»¥ä¸‹ä¸¤ç§æƒ…å†µ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¸Œæœ› i ä»…ä»…åœ¨forå¾ªç¯é‡Œé¢ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// è€Œä¸”ä»…ä»…åœ¨å½“å‰çš„for å¾ªç¯é‡Œé¢ä½¿ç”¨</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¸Œæœ› key ä»…ä»…åœ¨forå¾ªç¯é‡Œé¢ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// è€Œä¸”ä»…ä»…åœ¨å½“å‰çš„for å¾ªç¯é‡Œé¢ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨ varï¼Œæœ€ç»ˆä¼šç•™ä¸‹ä¸€ä¸ªå˜é‡ key åœ¨å†…å­˜ä¸­</span></span><br></pre></td></tr></table></figure>

<h4 id="ç”¨æ³•è§£æ"><a href="#ç”¨æ³•è§£æ" class="headerlink" title="ç”¨æ³•è§£æ"></a>ç”¨æ³•è§£æ</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line"><span class="comment">// i is not defined</span></span><br></pre></td></tr></table></figure>
<p>i æ˜¯åœ¨ <code>for</code> å¾ªç¯é‡Œé¢å£°æ˜ä½¿ç”¨çš„ï¼Œæ•…æ— æ³•åœ¨å¤–é¢ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æ­£ç¡®è¿è¡Œï¼Œè¾“å‡ºäº†3æ¬¡ <code>abc</code> ï¼Œè¿™è¡¨æ˜å¾ªç¯å†…éƒ¨ï¼ˆèŠ±æ‹¬å·å†…éƒ¨ï¼‰çš„å˜é‡ <code>i</code> ä¸å¾ªç¯å˜é‡ <code>i</code> ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæœ‰å„è‡ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚</p>
<h4 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    a = <span class="string">&#x27;abc&#x27;</span>; <span class="comment">// ReferenceError</span></span><br><span class="line">    <span class="keyword">let</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a is not defined</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒæŒ‰åŸæœ‰é€»è¾‘åˆ†æï¼Œ<code>a</code> å¼€å§‹ä¸º <code>123</code> ï¼Œåœ¨ <code>if</code> é‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šåˆ°ä¸Šä¸€çº§å»å¯»æ‰¾ <code>a</code> çš„å®šä¹‰å’Œèµ‹å€¼çš„åœ°æ–¹ ï¼Œäºæ˜¯èƒ½èµ‹å€¼æˆåŠŸæ‰å¯¹ã€‚<br>ä½†è¯¥èµ‹å€¼ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸º <code>let</code> å¯¼è‡´çš„</p>
<p>ES6 æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨ <code>let</code> æˆ– <code>const</code> å£°æ˜å˜é‡ï¼Œé‚£ä¹ˆåœ¨ä¸€å¼€å§‹å°±åœ¨å½“å‰ä»£ç å—å½¢æˆäº†ä¸€ä¸ªå—çº§å°é—­ä½œç”¨åŸŸï¼Œå‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œéƒ½ä¼šæŠ¥é”™</p>
<p>äºæ˜¯å°±äº§ç”Ÿäº†ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é—®é¢˜</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> a12345</span><br><span class="line"><span class="keyword">let</span> a12345</span><br><span class="line"><span class="keyword">typeof</span> a123456</span><br></pre></td></tr></table></figure>
<p>ä¼šå‘ç° <code>a12345</code> æ˜¯æŠ¥é”™ï¼Œè€Œä¸€ä¸ªæ²¡æœ‰å£°æ˜çš„å˜é‡ <code>a123456</code> å´æ˜¯ <code>undefined</code> </p>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>å…¶å®åœ¨ä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™ const å’Œ let åŒºåˆ«ä¸å¤§</p>
<h4 id="constç‰¹ç‚¹"><a href="#constç‰¹ç‚¹" class="headerlink" title="constç‰¹ç‚¹"></a>constç‰¹ç‚¹</h4><p>const æ—¨åœ¨å®šä¸€ä¸ªå›ºå®šä¸å˜çš„å˜é‡</p>
<p>æ³¨æ„ï¼šè¿™ä¸ªâ€œå›ºå®šä¸å˜â€æŒ‡çš„æ˜¯å†…å­˜åœ°å€</p>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">10</span>;</span><br><span class="line">num = <span class="number">20</span> <span class="comment">// æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">age</span>:<span class="number">12</span>&#125;</span><br><span class="line">obj.<span class="property">age</span> = <span class="number">14</span> <span class="comment">// no problem</span></span><br></pre></td></tr></table></figure>

<h2 id="å­—ç¬¦ä¸²æ¨¡æ¿"><a href="#å­—ç¬¦ä¸²æ¨¡æ¿" class="headerlink" title="å­—ç¬¦ä¸²æ¨¡æ¿"></a>å­—ç¬¦ä¸²æ¨¡æ¿</h2><p>è¿™ä¸ªçš„ç”¨å¤„çœŸçš„æ˜¯å¤ªå¤§äº†</p>
<p>æˆ‘æ›¾è§è¿‡è¿™æ ·çš„ä»£ç ï¼š</p>
<p>ä¸çŸ¥é“ä½ ä»¬çœ‹åˆ°è¿™æ ·çš„ä»£ç çš„æ—¶å€™ï¼Œå†…å¿ƒæ˜¯ä¸æ˜¯å¾ˆæ¿€åŠ¨å•ŠğŸ˜‚</p>
<p>åœ¨ ES6 é‡Œé¢ï¼Œå¦‚æœæœ‰äº›åœ°æ–¹ä¸å¾—ä¸ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ—¶å€™ï¼Œå¯ä»¥è¿™ä¹ˆä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a,b,c,d,e = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> html = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">    html+= <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;<span class="subst">$&#123;a&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;<span class="subst">$&#123;b&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;<span class="subst">$&#123;c&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;<span class="subst">$&#123;d&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;span&gt;<span class="subst">$&#123;e*i&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">&quot;.xxx&quot;</span>).<span class="title function_">append</span>(html)</span><br></pre></td></tr></table></figure>
<p>åœ¨ES6ä¸­å¯ä»¥ç”¨ `  ` æ¥åŒ…è£¹å­—ç¬¦ä¸²ï¼Œ</p>
<ol>
<li>åœ¨å…¶ä¸­å¯ä»¥è‚†æ— å¿Œæƒ®çš„ä½¿ç”¨å•å¼•å·å’ŒåŒå¼•å·ã€‚</li>
<li>å˜é‡æˆ–è€…è¡¨è¾¾å¼ ç”¨ <code>$&#123;&#125;</code> åŒ…è£¹èµ·æ¥</li>
</ol>
<h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><p>ES6 é‡Œé¢æä¾›äº†å‡½æ•°çš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯ç®­å¤´å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">ad</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç”¨å¤„-1"><a href="#ç”¨å¤„-1" class="headerlink" title="ç”¨å¤„"></a>ç”¨å¤„</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;sum+=item&#125;)</span><br><span class="line"><span class="comment">// sum 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç®€å†™ä¸º</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">map</span>( <span class="function"><span class="params">item</span> =&gt;</span>&#123;sum+=item&#125;)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€è¦ <code>return</code> ï¼Œå¯ä»¥ç›´æ¥çœç•¥åé¢çš„èŠ±æ‹¬å·</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">map</span>( <span class="function"><span class="params">item</span> =&gt;</span> item * <span class="number">2</span> )</span><br><span class="line"><span class="comment">// [2,4,6]</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>è¿™é‡Œæœ‰ä¸ªæœ‰æ„æ€çš„å°ä¾‹å­</p>
<p>æ³¨æ„çš„æ˜¯ï¼Œç®­å¤´å‡½æ•°é‡Œé¢ <code>this</code> çš„ä½œç”¨åŸŸï¼Œæ˜¯åœ¨å®šä¹‰çš„æ—¶å€™ç”Ÿæ•ˆçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™ç”Ÿæ•ˆï¼Œå…·ä½“çœ‹é˜®ä¸€å³°å¤§ç¥çš„<a href="http://es6.ruanyifeng.com/#docs/function#%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9">æ³¨æ„ç‚¹</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">location</span>:<span class="string">&#x27;åšæ–‡&#x27;</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">location</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj2.add() == &#x27;åšæ–‡&#x27;</span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">location</span>:<span class="string">&#x27;åšæ–‡&#x27;</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">location</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// obj2.add() != &#x27;åšæ–‡&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç é‡Œé¢ <code>obj2</code> é‡Œé¢çš„ <code>this</code> å‘ç°æŒ‡å‘çš„æ˜¯ <code>window</code> å¯¹è±¡</p>
<h2 id="æ•°ç»„å’Œå¯¹è±¡"><a href="#æ•°ç»„å’Œå¯¹è±¡" class="headerlink" title="æ•°ç»„å’Œå¯¹è±¡"></a>æ•°ç»„å’Œå¯¹è±¡</h2><p>æ•°ç»„å’Œå¯¹è±¡é‡Œé¢ï¼Œç”¨åˆ°çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯è¿­ä»£å§</p>
<p>ä»¥å‰æˆ‘ä»¬å¤åˆ¶ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡çš„æ–¹æ³•æ˜¯ä»¥ä¸‹è¿™æ ·</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">concat</span>([])</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">splice</span>()</span><br><span class="line"><span class="keyword">var</span> arr3 = <span class="title class_">Object</span>.<span class="title function_">assign</span>([],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;,&#123;<span class="attr">age</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•å¾ˆå¤šå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†</p>
<p>åœ¨ES6ä¸­å°±æ–¹ä¾¿å¤šäº†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> arr1 = [...arr]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj0 = &#123;<span class="attr">age</span>:<span class="number">123</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;xxx&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;...obj0,...obj1&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å¤åˆ¶çš„éƒ½æ˜¯æµ…æ‹·è´</p>
<h3 id="æ•°ç»„å¸¸ç”¨æ–¹æ³•"><a href="#æ•°ç»„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="æ•°ç»„å¸¸ç”¨æ–¹æ³•"></a>æ•°ç»„å¸¸ç”¨æ–¹æ³•</h3><p>ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼Œå¹³æ—¶ç”¨çš„æ¯”è¾ƒå¤šçš„æ–¹æ³•</p>
<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>.map ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> sum = arr.<span class="title function_">map</span>( <span class="function"><span class="params">item</span> =&gt;</span> item*<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h4><p>.reduce ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè®¡ç®—åçš„å€¼ï¼Œä¹Ÿæ˜¯æœ€åè¿”å›çš„å€¼ï¼Œåé¢æ‰æ˜¯ <code>item</code> , <code>index</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> arrSum = arr.<span class="title function_">reduce</span>( <span class="function">(<span class="params">sum,item</span>) =&gt;</span> sum+item)</span><br><span class="line"><span class="comment">// arrSum == 10</span></span><br></pre></td></tr></table></figure>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>.map ä¸æ”¹å˜åŸæ•°ç»„ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">var</span> arr = arr.<span class="title function_">reduce</span>( <span class="function"><span class="params">item</span> =&gt;</span> item &gt;= <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [3,4]</span></span><br></pre></td></tr></table></figure>
<p>ä»–è·Ÿ <code>.map</code> æ–¹æ³•å¾ˆåƒï¼Œä¸€èˆ¬è¦å¯¹æ•°æ®è¿›è¡Œå¤„ç†å°±ç”¨ <code>.map</code> æ–¹æ³•ï¼Œè€Œä»…ä»…æ˜¯è¿‡æ»¤æ•°æ®å°±ç”¨ <code>.filter</code></p>
<h4 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h4><p><code>.includes</code> åˆ¤æ–­æ•°ç»„æ˜¯å¦å­˜åœ¨æŸå€¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;s&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line">arr.<span class="title function_">includes</span>(<span class="string">&#x27;s&#x27;</span>) <span class="comment">// true</span></span><br><span class="line">arr.<span class="title function_">includes</span>(<span class="string">&#x27;s&#x27;</span>,<span class="number">3</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>includes</code> ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŸ¥è¯¢çš„èµ·å§‹ä½ç½®</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/08/es6%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%80%E5%8D%95%E8%AF%AD%E6%B3%95/" data-id="clpj81tie0003ad9v6068bqc3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-å°†hexoéƒ¨ç½²åˆ°é˜¿é‡Œäº‘" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/06/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/" class="article-date">
  <time datetime="2018-11-05T16:00:00.000Z" itemprop="datePublished">2018-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/06/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/">æœ¬æ–‡æ•™å­¦å¦‚ä½•å°† hexo åšå®¢éƒ¨ç½²åˆ°é˜¿é‡Œäº‘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>é¦–å…ˆç™»é™†ä½ çš„æœåŠ¡å™¨</p>
<h3 id="å®‰è£…-yum"><a href="#å®‰è£…-yum" class="headerlink" title="å®‰è£… yum"></a>å®‰è£… yum</h3><p>ç›®çš„æ˜¯ä¸ºäº†å®‰è£…Nginxï¼Œå¦‚æœå·²ç»å®‰è£…Nginxï¼Œè¿™ä¸€æ­¥å¯ä»¥å¿½ç•¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install yum</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…Nginx"><a href="#å®‰è£…Nginx" class="headerlink" title="å®‰è£…Nginx"></a>å®‰è£…Nginx</h3><p>åœ¨éƒ¨ç½² Hexo åšå®¢æ—¶æ¨èä½¿ç”¨ Nginx çš„ä¸»è¦åŸå› æœ‰å‡ ç‚¹ï¼š</p>
<ol>
<li><p><strong>Web æœåŠ¡å™¨åŠŸèƒ½ï¼š</strong> Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒå¯ä»¥è´Ÿè´£å¤„ç† HTTP è¯·æ±‚å¹¶å°†å®ƒä»¬è½¬å‘åˆ°ç›¸åº”çš„æœåŠ¡ã€‚å¯¹äº Hexo åšå®¢ï¼ŒNginx å¯ä»¥ä½œä¸º HTTP æœåŠ¡å™¨æ¥æä¾›åšå®¢çš„è®¿é—®æœåŠ¡ã€‚</p>
</li>
<li><p><strong>è´Ÿè½½å‡è¡¡å’Œåå‘ä»£ç†ï¼š</strong> å¦‚æœä½ çš„ Hexo åšå®¢è®¿é—®é‡è¾ƒå¤§ï¼ŒNginx å¯ä»¥ç”¨ä½œè´Ÿè½½å‡è¡¡å™¨ï¼Œåˆ†å‘æµé‡åˆ°å¤šä¸ª Hexo åšå®¢å®ä¾‹ï¼Œæé«˜ç³»ç»Ÿçš„å¯ä¼¸ç¼©æ€§ã€‚åŒæ—¶ï¼ŒNginx çš„åå‘ä»£ç†åŠŸèƒ½èƒ½å¤Ÿéšè—åç«¯æœåŠ¡çš„ç»†èŠ‚ï¼Œå¢å¼ºäº†å®‰å…¨æ€§ã€‚</p>
</li>
<li><p><strong>é™æ€æ–‡ä»¶æœåŠ¡ï¼š</strong> Hexo ç”Ÿæˆçš„åšå®¢æ˜¯é™æ€æ–‡ä»¶ï¼ŒNginx åœ¨å¤„ç†é™æ€æ–‡ä»¶ä¸Šæœ‰å¾ˆé«˜çš„æ•ˆç‡ã€‚é€šè¿‡ Nginx æä¾›é™æ€æ–‡ä»¶æœåŠ¡ï¼Œå¯ä»¥å‡è½» Hexo æœ¬èº«çš„è´Ÿæ‹…ï¼Œæé«˜åšå®¢çš„åŠ è½½é€Ÿåº¦ã€‚</p>
</li>
<li><p><strong>SSL&#x2F;TLS æ”¯æŒï¼š</strong> å¦‚æœä½ å¸Œæœ›å¯ç”¨ HTTPSï¼ŒNginx æä¾›äº†æ–¹ä¾¿çš„ SSL&#x2F;TLS é…ç½®ã€‚å®ƒèƒ½å¤Ÿå¤„ç†åŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œç¡®ä¿åšå®¢çš„æ•°æ®ä¼ è¾“æ˜¯å®‰å…¨çš„ã€‚</p>
</li>
<li><p><strong>çµæ´»çš„é…ç½®å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼š</strong> Nginx æä¾›äº†çµæ´»çš„é…ç½®æ–‡ä»¶ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿæ ¹æ®éœ€è¦è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚æ­¤å¤–ï¼ŒNginx è¿˜æ”¯æŒåå‘ä»£ç†ã€ç¼“å­˜ã€å‹ç¼©ç­‰åŠŸèƒ½ï¼Œä¸ºåšå®¢æä¾›äº†æ›´å¤šçš„æ€§èƒ½å’ŒåŠŸèƒ½ä¼˜åŒ–é€‰é¡¹ã€‚</p>
</li>
</ol>
<p>ç»¼åˆè€ƒè™‘è¿™äº›å› ç´ ï¼Œä½¿ç”¨ Nginx ä½œä¸º Hexo åšå®¢çš„å‰ç«¯æœåŠ¡å™¨æ˜¯ä¸€ç§å¸¸è§çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„é€‰æ‹©ï¼Œä½ ä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»– Web æœåŠ¡å™¨æˆ–æœåŠ¡æ¥æ‰˜ç®¡ Hexo åšå®¢ï¼Œå–å†³äºä½ çš„éœ€æ±‚å’Œåå¥½ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/06/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91/" data-id="clpj81tiq000dad9vbglm28u8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æµè§ˆå™¨åŸºç¡€ä¹‹å˜é‡æå‡" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/11/06/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/" class="article-date">
  <time datetime="2018-11-05T16:00:00.000Z" itemprop="datePublished">2018-11-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/11/06/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/">æµè§ˆå™¨åŸºç¡€ä¹‹å˜é‡æå‡ -- JavaScript é¢„è§£æ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ä»€ä¹ˆæ˜¯â€œå˜é‡æå‡â€"><a href="#ä»€ä¹ˆæ˜¯â€œå˜é‡æå‡â€" class="headerlink" title="ä»€ä¹ˆæ˜¯â€œå˜é‡æå‡â€"></a>ä»€ä¹ˆæ˜¯â€œå˜é‡æå‡â€</h2><p>é¦–å…ˆä¸Šä¸ªä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç ä¼°è®¡å¤§å®¶éƒ½çŸ¥é“ï¼Œæ‰“å°çš„æ˜¯undefinedï¼Œå› ä¸ºjsåœ¨åŠ è½½çš„æ—¶å€™å­˜åœ¨å˜é‡æå‡ã€‚ä¸Šé¢çš„è¿™æ®µä»£ç å…¶å®ç­‰åŒäºè¿™ä¸ªï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">a = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>å†ä¸¾ä¸€ä¸ªä¾‹å­å¤§å®¶çœ‹çœ‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">false</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ˜æ˜ <code>if</code> è¯­å¥é‡Œé¢çš„ä»£ç æ²¡æœ‰æ‰§è¡Œï¼Œä½† <code>a</code> çš„å€¼ä¾ç„¶æ˜¯ <code>undefined</code>ï¼Œè¯´æ˜é¢„è§£æçš„è¿‡ç¨‹å¹¶ä¸å—åˆ° <code>if</code> åˆ¤æ–­è¯­å¥çš„å½±å“</p>
<p>è¿™å°±æ˜¯å˜é‡æå‡å¯¼è‡´çš„</p>
<ul>
<li>å˜é‡æå‡çš„åŸå› ï¼š<i>åœ¨å½“å‰ä½œç”¨åŸŸä¸‹ï¼Œjsè¿è¡Œä¹‹å‰ï¼Œä¼šæŠŠå¸¦æœ‰varå’Œfunctionå…³é”®å­—çš„äº‹å…ˆå£°æ˜ï¼Œå¹¶åœ¨å†…å­˜ä¸­å®‰æ’å¥½ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš <b>é¢„è§£æ</b>ã€‚ç„¶åå†ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œjsè¯­å¥ã€‚</i></li>
<li>æ³¨æ„ï¼šé¢„è§£æåªä¼šå‘ç”Ÿåœ¨é€šè¿‡<code>var</code>å®šä¹‰çš„å˜é‡å’Œ<code>function</code>ä¸Šã€‚</li>
</ul>
<h2 id="å˜é‡æå‡ä¹‹-â€“-varå’ŒfunctionåŒºåˆ«"><a href="#å˜é‡æå‡ä¹‹-â€“-varå’ŒfunctionåŒºåˆ«" class="headerlink" title="å˜é‡æå‡ä¹‹ â€“ varå’ŒfunctionåŒºåˆ«"></a>å˜é‡æå‡ä¹‹ â€“ varå’ŒfunctionåŒºåˆ«</h2><p>åˆšåˆšæåˆ°äº† â€œæœ‰<code>var</code>å’Œ<code>function</code>å…³é”®å­—çš„äº‹å…ˆå£°æ˜â€ï¼Œé‚£ä¹ˆ <code>function</code> å’Œ <code>var</code> éƒ½æ˜¯å˜é‡æå‡ï¼Œä»–ä¿©åœ¨æå‡çš„æ—¶å€™ï¼Œæ˜¯å¹¶åˆ—çš„é¡ºåºå¾€ä¸‹æå‡å‘¢ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šçš„è§„åˆ™å‘¢ï¼Œæˆ‘ä»¬çœ‹ä¸ªä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2345</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> add;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(add)</span><br></pre></td></tr></table></figure>

<p>æ‰“å° <code>add</code> ä¹‹åå‘ç°äº†ä»€ä¹ˆå‘¢ï¼Ÿ ç»“æœæ˜¯ <code>f add()&#123;console.log(2345)&#125;</code> è¿˜æ˜¯ <code>undefined</code> å‘¢ï¼Ÿå¤§å®¶å¯ä»¥è‡ªè¡Œå°†å£°æ˜çš„é¡ºåºè°ƒæ¢ä¸€ä¸‹ï¼Œå‘ç°æ‰“å°çš„è¿˜æ˜¯ä¸€æ ·çš„ç»“æœ</p>
<p>è¿™å…¶ä¸­å°±è¯´æ˜äº†ä¸¤ä¸ªé—®é¢˜</p>
<ol>
<li>jsåœ¨é¢„è§£æçš„æ—¶å€™ï¼Œ <code>function</code> å£°æ˜çš„å˜é‡ï¼Œä¼šè¦†ç›– <code>var</code> å£°æ˜çš„å˜é‡</li>
<li><code>function</code> ï¼Œä¸ä½†å£°æ˜äº†å˜é‡ï¼Œè€Œä¸”å®šä¹‰äº†å˜é‡çš„å†…å®¹ï¼ˆå› ä¸ºåˆšåˆšçš„addæ‰“å°çš„æ˜¯ <code>f add()&#123;console.log(2345)&#125;</code> ï¼Œè€Œä¸æ˜¯ <code>function()&#123;&#125;</code>ï¼‰</li>
</ol>
<h2 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h2><h3 id="letå£°æ˜å˜é‡"><a href="#letå£°æ˜å˜é‡" class="headerlink" title="letå£°æ˜å˜é‡"></a>letå£°æ˜å˜é‡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç ä¼šæŠ¥é”™ <code>a is not defined</code> ï¼Œè¯´ <code>a</code> æœªå®šä¹‰ï¼Œ <code>let</code> æ˜¯ ECMAScript 2015ï¼ˆes6ï¼‰ä¸­å£°æ˜å˜é‡çš„æ–¹å¼ä¹‹ä¸€</p>
<p>è¯´æ˜ <code>let</code> å®šä¹‰çš„å˜é‡ï¼Œä¸å­˜åœ¨å˜é‡æå‡ï¼Œå³ <i>åœ¨å“ªå®šä¹‰å˜é‡ï¼Œå³åœ¨å“ªå£°æ˜å˜é‡</i></p>
<h2 id="æµ‹è¯•é¢˜"><a href="#æµ‹è¯•é¢˜" class="headerlink" title="æµ‹è¯•é¢˜"></a>æµ‹è¯•é¢˜</h2><p>è¯•é¢˜å¦‚è‹¥ä¸ç†è§£ï¼Œè¯·å†æ¬¡è¯»ä¸€ä¸‹<b>é¢„è§£æ</b>çš„å®šä¹‰ï¼š</p>
<p><i>åœ¨å½“å‰ä½œç”¨åŸŸä¸‹ï¼Œjsè¿è¡Œä¹‹å‰ï¼Œä¼šæŠŠå¸¦æœ‰varå’Œfunctionå…³é”®å­—çš„äº‹å…ˆå£°æ˜ï¼Œå¹¶åœ¨å†…å­˜ä¸­å®‰æ’å¥½ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš <b>é¢„è§£æ</b>ã€‚ç„¶åå†ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œjsè¯­å¥ã€‚</i></p>
<h3 id="è¯•é¢˜1"><a href="#è¯•é¢˜1" class="headerlink" title="è¯•é¢˜1"></a>è¯•é¢˜1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> b;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(b)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¯•é¢˜2"><a href="#è¯•é¢˜2" class="headerlink" title="è¯•é¢˜2"></a>è¯•é¢˜2</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="comment">// ä¸å£°æ˜è€Œç›´æ¥ä½¿ç”¨çš„å˜é‡æ˜¯å…¨å±€å˜é‡</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/11/06/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9F%BA%E7%A1%80%E4%B9%8B%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87/" data-id="clpj81tix000nad9vgeb0eqxf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/07/13/hello-world/" class="article-date">
  <time datetime="2018-07-13T12:20:20.000Z" itemprop="datePublished">2018-07-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/demo/">demo</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2018/07/13/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- ç­‰ä¸‹çœ‹ autoprefixer å’Œ è·¯ç”±æ‡’åŠ è½½ -->

<h2 id="æˆ‘ä¸ºä»€ä¹ˆè¦å†™ä¸ªåšå®¢ï¼Ÿ"><a href="#æˆ‘ä¸ºä»€ä¹ˆè¦å†™ä¸ªåšå®¢ï¼Ÿ" class="headerlink" title="æˆ‘ä¸ºä»€ä¹ˆè¦å†™ä¸ªåšå®¢ï¼Ÿ"></a>æˆ‘ä¸ºä»€ä¹ˆè¦å†™ä¸ªåšå®¢ï¼Ÿ</h2><h3 id="æŠ€æœ¯æ–¹é¢"><a href="#æŠ€æœ¯æ–¹é¢" class="headerlink" title="æŠ€æœ¯æ–¹é¢"></a>æŠ€æœ¯æ–¹é¢</h3><ul>
<li>ç½‘ä¸ŠæŠ€æœ¯åšå®¢ï¼ŒæŠ€æœ¯æ–‡ç« ä¸è®¡å…¶æ•°ã€‚æˆ‘æ˜¯ä¸ºäº†ç”¨æ›´ç®€å•çš„è¯­è¨€ï¼Œè®©ä½ æ›´å¿«çš„ä½¿ç”¨ä¸€ä¸ªä¸å¤ªäº†è§£çš„ä¸œè¥¿ï¼Œå¦‚æœéœ€è¦æ·±å…¥äº†è§£ï¼Œå†å»ç™¾åº¦å…¶åŸç†å’Œé«˜çº§ç”¨æ³•ç­‰ç­‰</li>
<li>ä¸ºäº†ç»™è‡ªå·±æœ‰ä¸ªæŠ€æœ¯æ²‰æ·€ï¼ŒæŠŠçŸ¥è¯†æœ‰ä¸ªç»Ÿç­¹è§„åˆ’</li>
</ul>
<h3 id="éæŠ€æœ¯æ–¹é¢"><a href="#éæŠ€æœ¯æ–¹é¢" class="headerlink" title="éæŠ€æœ¯æ–¹é¢"></a>éæŠ€æœ¯æ–¹é¢</h3><p>è¿˜åœ¨è€ƒè™‘æ˜¯å¦ä¹Ÿè¦æ”¾åˆ°è¿™ä¸ªåšå®¢ç³»ç»Ÿé‡Œé¢å“ˆå“ˆå“ˆ</p>
<!-- <blockquote><p>content</p>
<footer><strong>[author[</strong><cite>source]] [link] [source_link_title]</cite></footer></blockquote> -->
<!-- 

Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).

## Quick Start

### Create a new post

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a> â€“&gt;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://iprogramme.github.io/MyBlog/2018/07/13/hello-world/" data-id="clpj81tij0007ad9vgh35cebr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/node/" rel="tag">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/python/" rel="tag">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/web/" rel="tag">web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/demo/">demo</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E7%88%AC%E8%99%AB/">çˆ¬è™«</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/es6%EF%BC%8C%E5%89%8D%E7%AB%AF/" rel="tag">es6ï¼Œå‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/node/" rel="tag">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/node-js/" rel="tag">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/promise/" rel="tag">promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/web/" rel="tag">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%89%8D%E7%AB%AF/" rel="tag">å‰ç«¯</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">åšå®¢</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E7%88%AC%E8%99%AB/" rel="tag">çˆ¬è™«</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/blog/tags/css/" style="font-size: 10px;">css</a> <a href="/blog/tags/es6/" style="font-size: 16.67px;">es6</a> <a href="/blog/tags/es6%EF%BC%8C%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">es6ï¼Œå‰ç«¯</a> <a href="/blog/tags/html/" style="font-size: 10px;">html</a> <a href="/blog/tags/js/" style="font-size: 20px;">js</a> <a href="/blog/tags/node/" style="font-size: 10px;">node</a> <a href="/blog/tags/node-js/" style="font-size: 10px;">node.js</a> <a href="/blog/tags/promise/" style="font-size: 10px;">promise</a> <a href="/blog/tags/python/" style="font-size: 10px;">python</a> <a href="/blog/tags/web/" style="font-size: 10px;">web</a> <a href="/blog/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 13.33px;">å‰ç«¯</a> <a href="/blog/tags/%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">åšå®¢</a> <a href="/blog/tags/%E7%88%AC%E8%99%AB/" style="font-size: 10px;">çˆ¬è™«</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2018/11/20/js%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D/">js æ•°ç»„å¯¹è±¡å»é‡</a>
          </li>
        
          <li>
            <a href="/blog/2018/11/20/%E6%89%8B%E5%86%99promise%E5%88%86%E6%9E%90/">æ‰‹æŠŠæ‰‹æ•™ä½ å†™promiseï¼Œå¸®ä½ åˆ†æpromiseçš„æ‰§è¡Œè¿‡ç¨‹</a>
          </li>
        
          <li>
            <a href="/blog/2018/11/19/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%80%20%E4%B9%8B%20%E6%89%93%E5%8C%85/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/11/11/node.js%E7%88%AC%E8%99%AB%E4%B8%AD%E5%85%B3%E6%9D%91%E5%9C%A8%E7%BA%BF%E7%94%B5%E7%93%B6%E8%BD%A6%E4%BF%A1%E6%81%AF/">node.jsçˆ¬è™«ä¸­å…³æ‘åœ¨çº¿ç”µç“¶è½¦ä¿¡æ¯</a>
          </li>
        
          <li>
            <a href="/blog/2018/11/10/es6%E5%9F%BA%E7%A1%80%E4%B9%8Bpromise/">es6åŸºç¡€ä¹‹Promise</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 éƒ­å‡<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/blog/js/script.js"></script>




  </div>
</body>
</html>